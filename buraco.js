var ne=Object.create,I=Object.defineProperty,ce=Object.getPrototypeOf,le=Object.prototype.hasOwnProperty,he=Object.getOwnPropertyNames,de=Object.getOwnPropertyDescriptor;var ue=s=>I(s,"__esModule",{value:!0});var U=(s,e)=>()=>(e||(e={exports:{}},s(e.exports,e)),e.exports);var pe=(s,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of he(e))!le.call(s,r)&&r!=="default"&&I(s,r,{get:()=>e[r],enumerable:!(t=de(e,r))||t.enumerable});return s},b=s=>pe(ue(I(s!=null?ne(ce(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);var te=U((_,V)=>{_=V.exports=ge;_.getSerialize=ee;function ge(s,e,t,r){return JSON.stringify(s,ee(e,r),t)}function ee(s,e){var t=[],r=[];return e==null&&(e=function(a,i){return t[0]===i?"[Circular ~]":"[Circular ~."+r.slice(0,t.indexOf(i)).join(".")+"]"}),function(a,i){if(t.length>0){var o=t.indexOf(this);~o?t.splice(o+1):t.push(this),~o?r.splice(o,Infinity,a):r.push(a),~t.indexOf(i)&&(i=e.call(this,a,i))}else t.push(i);return s==null?i:s.call(this,a,i)}}});var B=U((Ne,re)=>{"use strict";var ve=te(),ye=function(){var s=4022871197,e=function(t){if(t){t=t.toString();for(var r=0;r<t.length;r++){s+=t.charCodeAt(r);var a=.02519603282416938*s;s=a>>>0,a-=s,a*=s,s=a>>>0,a-=s,s+=a*4294967296}return(s>>>0)*23283064365386963e-26}else s=4022871197};return e},R=function(s){return function(){var e=48,t=1,r=e,a=new Array(e),i,o,f=0,y=new ye;for(i=0;i<e;i++)a[i]=y(Math.random());var G=function(){++r>=e&&(r=0);var n=1768863*a[r]+t*23283064365386963e-26;return a[r]=n-(t=n|0)},h=function(n){return Math.floor(n*(G()+(G()*2097152|0)*11102230246251565e-32))};h.string=function(n){var P,D="";for(P=0;P<n;P++)D+=String.fromCharCode(33+h(94));return D};var oe=function(){var n=Array.prototype.slice.call(arguments);for(i=0;i<n.length;i++)for(o=0;o<e;o++)a[o]-=y(n[i]),a[o]<0&&(a[o]+=1)};return h.cleanString=function(n){return n=n.replace(/(^\s*)|(\s*$)/gi,""),n=n.replace(/[\x00-\x1F]/gi,""),n=n.replace(/\n /,`
`),n},h.hashString=function(n){for(n=h.cleanString(n),y(n),i=0;i<n.length;i++)for(f=n.charCodeAt(i),o=0;o<e;o++)a[o]-=y(f),a[o]<0&&(a[o]+=1)},h.seed=function(n){(typeof n=="undefined"||n===null)&&(n=Math.random()),typeof n!="string"&&(n=ve(n,function(P,D){return typeof D=="function"?D.toString():D})),h.initState(),h.hashString(n)},h.addEntropy=function(){var n=[];for(i=0;i<arguments.length;i++)n.push(arguments[i]);oe(f+++new Date().getTime()+n.join("")+Math.random())},h.initState=function(){for(y(),i=0;i<e;i++)a[i]=y(" ");t=1,r=e},h.done=function(){y=null},typeof s!="undefined"&&h.seed(s),h.range=function(n){return h(n)},h.random=function(){return h(Number.MAX_VALUE-1)/Number.MAX_VALUE},h.floatBetween=function(n,P){return h.random()*(P-n)+n},h.intBetween=function(n,P){return Math.floor(h.random()*(P-n+1))+n},h}()};R.create=function(s){return new R(s)};re.exports=R});var H=b(require("path"));var se=b(require("fs"));var u=s=>`[${s}m`,A={bold:u("1"),black:u("30"),red:u("31"),green:u("32"),yellow:u("33"),blue:u("34"),magenta:u("35"),cyan:u("36"),white:u("37"),gray:u("90"),bgBlack:u("40"),bgRed:u("41"),bgGreen:u("42"),bgYellow:u("43"),bgBlue:u("44"),bgMagenta:u("45"),bgCyan:u("46"),bgWhite:u("47"),bgGray:u("100"),reset:u("0")};function fe(s){return s.endsWith(A.reset)?s:`${s}${A.reset}`}var c=Object.keys(A).reduce((s,e)=>({...s,[e]:t=>fe(`${A[e]}${t}`)}),{});var T="\u2665\u2666\u2663\u2660".split(""),J;(function(s){s[s.Heart=0]="Heart",s[s.Diamonds=1]="Diamonds",s[s.Clubs=2]="Clubs",s[s.Spades=3]="Spades"})(J||(J={}));var E=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],m;(function(s){s[s.Two=0]="Two",s[s.Three=1]="Three",s[s.Four=2]="Four",s[s.Five=3]="Five",s[s.Six=4]="Six",s[s.Seven=5]="Seven",s[s.Eight=6]="Eight",s[s.Nine=7]="Nine",s[s.Ten=8]="Ten",s[s.Jack=9]="Jack",s[s.Queen=10]="Queen",s[s.King=11]="King",s[s.Ace=12]="Ace"})(m||(m={}));var w=class{constructor(e,t){if(typeof e=="string"){let r=T.reduce((o,f)=>e.indexOf(f)>o?e.indexOf(f):o,-1);if(r<0||r>=T.length)throw new Error(`Carta ${e} \xE9 inv\xE1lida: n\xE3o h\xE1 naipe.`);let a=e.substring(0,r),i=e.substring(r);if(this._value=E.findIndex(o=>o===a),this._suit=T.findIndex(o=>o===i),this._value<0||this._value>=E.length)throw new Error(`Carta ${e} \xE9 inv\xE1lida: valor inexistente.`)}else{if(t===void 0)throw new Error("Carta sem naipe associado.");this._value=e,this._suit=t}}get value(){return this._value}get suit(){return this._suit}get str(){return E[this._value]+T[this._suit]}toString(){let e=c.black(E[this._value]),t=this._suit<2?c.red(T[this._suit]):c.black(T[this._suit]);return c.bgWhite(e)+c.bgWhite(t)}};function S(){let s=new v;for(let e=0;e<T.length;e++)for(let t=0;t<E.length;t++)s.push(new w(t,e));return s.shuffle(),s.shuffle(),s}var v=class{constructor(e=[]){this.cards=e}get length(){return this.cards.length}shuffle(){for(let e=this.cards.length-1;e>0;e--){let t=Math.floor(p.random()*(e+1));[this.cards[e],this.cards[t]]=[this.cards[t],this.cards[e]]}}sort(){this.cards.sort((e,t)=>e.suit!=t.suit?e.suit-t.suit:e.value-t.value)}sorted(){let e=this.cards.slice();return e.sort((t,r)=>t.suit!=r.suit?t.suit-r.suit:t.value-r.value),e}get str(){return`[ ${this.cards.map(e=>e.str).join(" ")} ]`}toString(){return`[ ${this.cards.join(" ")} ]`}get top(){return this.cards[this.cards.length-1]}pop(){return this.cards.pop()}push(e){e!==void 0&&this.cards.push(e)}pushCards(e){e.forEach(t=>this.cards.push(t))}indexOf(e){return this.cards.findIndex(t=>t.value===e.value&&t.suit===e.suit)}has(e){return this.indexOf(e)>=0}hasAll(e){return e.every(t=>this.has(t))}remove(e){let t=this.indexOf(e);return t<0?!1:(this.cards.splice(t,1),!0)}removeCards(e){e.forEach(t=>this.remove(t))}clear(){this.cards=[]}merge(e){for(;e.length>0;)this.push(e.pop());return this.shuffle(),this}isMeld(){if(this.cards.length<3||this.cards.length>14)return!1;let e=[],t=[],r=[];this.cards.forEach(i=>{i.value===12?e.push(i):i.value===0?r.push(i):t.push(i)});let a=t.length>0?t[0].suit:e[0].suit;if(t.some(i=>i.suit!==a)||(t.sort((i,o)=>i.suit!=o.suit?i.suit-o.suit:i.value-o.value),r.length>2))return!1;if(r.length===2){if(r[0].suit!==a&&r[1].suit!==a)return!1;let i=r[0].suit===a?0:1;t.unshift(r.splice(i,1)[0])}if(e.length>2)return!1;e.length===2&&t.push(e.pop());for(let i=1;i<t.length;i++){let o=Math.abs(t[i].value-t[i-1].value);if(o===0||o>2)return!1;if(o===2){if(r.length===0)return!1;t.splice(i,0,r.pop()),i++}}if(e.length===1)if(t[0].value===0)t.unshift(e.pop());else if(t[t.length-1].value===11)t.push(e.pop());else if(r.length===1)if(t[0].value===1)t.unshift(r.pop()),t.unshift(e.pop());else if(t[t.length-1].value===10)t.push(r.pop()),t.push(e.pop());else return!1;else return!1;return r.length===1&&t.unshift(r.pop()),this.cards=t,!0}};var C=class{constructor(e=1){this.melds=[],this.playersHands=[new v],e==2&&this.playersHands.push(new v)}getHand(e=0){return this.playersHands[e]}};function K(s,e,t){let r=Math.floor((s-e.length)/2)-1,a=t.repeat(r),i=s-r-e.length-2,o=t.repeat(i),f=c.white(`${a} ${e} ${o}`);console.log(c.bgBlue(f))}function $(s=""){let e=80;console.log();let t=c.white("=".repeat(e)),r=c.bgBlue(t);Array.isArray(s)?(console.log(r),s.forEach(a=>K(e,a," ")),console.log(r)):s.length==0?console.log(r):K(e,s,"="),console.log()}var Q=b(require("path")),M=b(require("child_process"));var W=b(require("child_process")),F=b(require("stream")),z=b(require("readline"));function N(s){let e=(0,z.createInterface)({input:s}),t=async function*(){for await(let r of e)yield r}();return async()=>(await t.next()).value}function X(s){let e=new F.Readable({read:()=>{}}),t=(0,W.fork)(s);return t.on("message",r=>e.push(r)),{process:t,read:N(e),write:r=>t.send(`${r}
`)}}var Y=b(require("path")),k=console.log,me=3e3,Z=c.bgGreen(c.black("DEBUG:")),j=class{constructor(e,t){this.id=e;this.execName=t;Y.isAbsolute(t)?this.proc=(0,M.spawn)(t):this.proc=(0,M.spawn)((0,Q.join)(__dirname,t)),this.proc.on("error",r=>{k(c.red(`Erro na execu\xE7\xE3o do programa ${t}.`)),k(c.red(r)),this.halt()}),this.proc.stderr.on("data",r=>{let a=r.toString().replace(/\n/g,`
	`);k(c.red(`Bot ${e}:`)),k(c.red(`	${a}`))}),this._read=N(this.proc.stdout)}write(e){j.debug&&console.debug(`${Z} Enviando para ${this.id}: ${e}`),this.proc.stdin.write(`${e}
`)}async read(){let e,t=new Promise(i=>{e=setTimeout(()=>i("TIMEOUT"),3e3)}),r=this._read(),a=await Promise.race([t,r]);return a==="TIMEOUT"?(console.log(`Jogador ${this.id} n\xE3o enviou dados no tempo de ${me}ms e foi eliminado.`),Promise.reject("Tempo esgotado.")):(clearTimeout(e),j.debug&&console.debug(`${Z} Recebido de ${this.id}: ${a}`),Promise.resolve(a))}halt(){this.proc.kill("SIGINT")}},x=j;x.debug=!1;var d;(function(s){s.SETUP="Configura\xE7\xE3o inv\xE1lida.",s.ACTION="A\xE7\xE3o inv\xE1lida.",s.FORMAT="Formato de mensagem inv\xE1lido.",s.CARD="Carta inv\xE1lida.",s.DECK="Sequ\xEAncia de cartas inv\xE1lida.",s.MELD="Jogo inv\xE1lido.",s.FILE="Arquivo inv\xE1lido."})(d||(d={}));var l=console.log,O=c.bgGreen(c.black("DEBUG:")),p=class{constructor(e){this.players=e;if(e.length!==2&&e.length!==4&&this.fail(d.SETUP,"O jogo deve ter dois ou quatro jogadores."),p.seed?p.rand=B().create(p.seed):(p.seed=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),p.rand=B().create(p.seed)),l(`Seed da partida ${p.seed}`),this.discardPile=new v,this.stock=S().merge(S()),this.playersPerTeam=e.length/2,this.team0=new C(this.playersPerTeam),this.team1=new C(this.playersPerTeam),p.initFile)this.initFromFile(p.initFile);else{for(let t=0;t<11;t++)for(let r=0;r<this.playersPerTeam;r++)this.team0.getHand(r).push(this.stock.pop()),this.team1.getHand(r).push(this.stock.pop());this.discardPile.push(this.stock.pop()),this.playerIndex=Math.floor(p.random()*2*this.playersPerTeam)}}initFromFile(e){let t=(a,i)=>this.stock.remove(a)&&i.push(a),r=(a,i)=>{a.split(" ").slice(1,-1).map(o=>new w(o)).forEach(o=>t(o,i))};try{let i=(0,se.readFileSync)(e,"utf8").split(`
`).filter(o=>o.length>0);for(let o=0;o<this.playersPerTeam;o++)r(i[2*o+0],this.team0.getHand(o)),r(i[2*o+1],this.team1.getHand(o));t(new w(i[i.length-2]),this.discardPile),this.playerIndex=Number(i[i.length-1])}catch(a){console.error(a),this.closeGame()}}static random(){return this.rand.random()}initialSetup(){l(`O jogo come\xE7a com o jogador ${this.currentPlayerName}.`),l(`A pilha de descarte come\xE7a inicialmente com a carta ${this.discardPile.top}.`);let e=this.players.reduce((t,r)=>t+r.id+" ","").trimEnd();this.players.forEach((t,r)=>{this.send(e,t),this.send(t.id,t),this.send(this.getHand(r).str,t),this.send(this.discardPile.top.str,t)})}closeGame(){this.players.forEach(e=>e.halt()),process.exit()}countPoints(e){let t=0;return e.cards.forEach(r=>{r.value>=m.Three&&r.value<=m.Seven?t+=5:r.value==m.Two||r.value>=m.Eight&&r.value<=m.King?t+=10:t+=15}),e.length>=7&&(t+=e.cards.some((a,i,o)=>{if(a.value!==m.Two)return!1;if(i<0){let f=o[i-1];if(f.value!==m.Ace||f.suit!==a.suit)return!0}if(i<o.length-1){let f=o[i+1];if(f.value!==m.Three||f.suit!==a.suit)return!0}return!1})?100:200),t}countTeamPoints(e){let t=e.melds.reduce((i,o)=>i+this.countPoints(o),0),r=this.countPoints(e.playersHands[0]);r===0&&(r=-100);let a=0;return this.playersPerTeam==2&&(a=this.countPoints(e.playersHands[1]),a===0&&(a=-100)),t-r-a}showPoints(e,t,r,a){e.forEach((i,o)=>l(`${i} tinha na m\xE3o as cartas ${t[o].sorted()}`)),r.length>0?(l("Os seguintes jogos foram baixados:"),r.forEach(i=>l(i.toString()))):l("Nenhum jogo foi baixado."),l(`Total de pontos: ${a} pontos`)}gameOver(e){$(e);let t=this.countTeamPoints(this.team0),r=this.countTeamPoints(this.team1),a=this.players[0].color(this.players[0].id),i=this.players[1].color(this.players[1].id);if(this.playersPerTeam===1)this.showPoints([a],[this.getHand(0)],this.team0.melds,t),$(),this.showPoints([i],[this.getHand(1)],this.team1.melds,r),$(),t===r&&l("Incr\xEDvel! Houve um empate!"),l(`${t>r?a:i} venceu.
`);else{let o=this.players[2].color(this.players[2].id),f=this.players[3].color(this.players[3].id);this.showPoints([a,o],[this.getHand(0),this.getHand(2)],this.team0.melds,t),$(),this.showPoints([i,f],[this.getHand(1),this.getHand(3)],this.team1.melds,r),$(),t===r&&l("Incr\xEDvel! Houve um empate!");let y=t>r?`${a} e ${o}`:`${i} e ${f}`;l(`${y} venceram.
`)}this.closeGame()}async run(){for(;;)this.broadcast(this.currentPlayer.id),await this.firstMove(),await this.secondMove(),this.playerIndex=(this.playerIndex+1)%this.players.length}async firstMove(){let{action:e,args:t}=await this.receiveAction();e==="GET_STOCK"?this.getStock():e==="GET_DISCARD"?(this.getDiscard(t),this.currentHand.cards.length===0&&this.gameOver(`Jogador ${this.currentPlayer.id} bateu.`)):this.fail(d.ACTION,`A primeira a\xE7\xE3o deve ser puxar uma carta do monte (GET_STOCK) ou do lixo (GET_DISCARD) e foi enviado ${c.yellow(e)}.`),this.showPlayerState()}async secondMove(){let e;do{switch(e=await this.receiveAction(),e.action){case"MELD_NEW":this.createMeld(e.args);break;case"MELD_JOIN":this.joinMeld(e.args);break;case"DISCARD":this.discard(e.args);break;default:this.fail(d.ACTION,`Poss\xEDveis a\xE7\xF5es: MELD_NEW, MELD_JOIN ou DISCARD. A a\xE7\xE3o ${e.action} n\xE3o \xE9 poss\xEDvel.`);break}this.currentHand.cards.length===0&&this.gameOver(`Jogador ${this.currentPlayer.id} bateu.`),this.showPlayerState()}while(e.action!=="DISCARD")}showPlayerState(){x.debug&&(l(`${O} M\xE3o do jogador ${this.currentPlayerName}`),l(`${O} ${this.currentHand.sorted()}`),l(`${O} Jogos do jogador ${this.currentPlayerName}`),this.currentTeam.melds.forEach(e=>l(`${O} ${e}`)))}getStock(){let e=this.stock.pop();e?(this.currentHand.push(e),this.send(e.str),this.broadcastNonCurrent("GET_STOCK"),l(`${this.currentPlayerName} puxou uma carta do deque de compra.`)):this.gameOver("N\xE3o h\xE1 mais cartas para puxar. O jogo terminou.")}getDiscard(e){e.length<2&&this.fail(d.DECK,"\xC9 necess\xE1rio pelo menos duas cartas para se juntar com o topo do lixo.");let t;try{t=e.map(i=>new w(i))}catch(i){this.fail(d.CARD,i)}let r=this.discardPile.pop(),a=new v([r,...t]);this.currentHand.hasAll(t)===!1?this.fail(d.DECK,"Tentativa de forma jogo com cartas que n\xE3o est\xE3o na m\xE3o."):a.isMeld()?(this.currentTeam.melds.push(a),this.send(this.discardPile.str),this.broadcastNonCurrent(`GET_DISCARD [ ${e.join(" ")} ]`),this.currentHand.removeCards(t),this.currentHand.merge(this.discardPile),l(`${this.currentPlayerName} pegou o lixo e fez o jogo ${a}.`)):this.fail(d.MELD,`As cartas ${a} n\xE3o formam um jogo.`)}createMeld(e){let t;try{t=e.map(a=>new w(a))}catch(a){this.fail(d.CARD,a)}let r=new v(t);this.currentHand.hasAll(t)===!1?this.fail(d.DECK,"Tentativa de forma jogo com cartas que n\xE3o est\xE3o na m\xE3o."):r.isMeld()?(this.currentTeam.melds.push(r),this.currentHand.removeCards(t),this.broadcastNonCurrent(`MELD_NEW ${r.str}`),l(`${this.currentPlayerName} baixou o jogo ${r}.`)):this.fail(d.MELD,`As cartas ${r} n\xE3o formam um jogo.`)}joinMeld([e,...t]){let r=Number(e);(r<0||r>=this.currentTeam.melds.length)&&this.fail(d.FORMAT,`O identificador ${e} n\xE3o costa nos jogos da equipe.`),(t[0]!=="["||t[t.length-1]!=="]")&&this.fail(d.FORMAT,"As cartas a serem anexadas ao jogo devem estar entre [ ].");let a;try{a=t.slice(1,-1).map(o=>new w(o))}catch(o){this.fail(d.CARD,o)}let i=this.currentTeam.melds[r];if(i.pushCards(a),this.currentHand.hasAll(a)===!1)this.fail(d.DECK,"Tentativa de forma jogo com cartas que n\xE3o est\xE3o na m\xE3o.");else if(i.isMeld()){this.currentHand.removeCards(a);let o=new v(a);this.broadcastNonCurrent(`MELD_JOIN ${e} ${o.str}`),l(`${this.currentPlayerName} adicionou as cartas ${o.str} atualizando o jogo ${i}.`)}else this.fail(d.MELD,`As cartas ${i} n\xE3o formam um jogo.`)}discard(e){e.length===0&&this.fail(d.FORMAT,"\xC9 necess\xE1rio informar a carta a ser descartada na a\xE7\xE3o DISCARD"),e.length>1&&this.fail(d.FORMAT,"A\xE7\xE3o DISCARD requer um \xFAnico par\xE2metro, a carta a ser descartada");try{let t=new w(e[0]);this.currentHand.has(t)?(this.currentHand.remove(t),this.discardPile.push(t),this.broadcastNonCurrent(`DISCARD ${t.str}`),l(`${this.currentPlayerName} descartou a carta ${t}.`)):this.fail(d.CARD,`O jogador n\xE3o possui a carta ${t}.`)}catch(t){this.fail(d.CARD,t)}}async receive(){return await this.currentPlayer.read()}async receiveAction(){let e=await this.receive(),[t,...r]=e.split(" ").filter(a=>a.length>0);return r[0]==="["&&r[r.length-1]==="]"&&(r=r.slice(1,-1)),{action:t,args:r}}send(e,t=this.currentPlayer){return t.write(e)}broadcast(e,t=this.players){t.forEach(r=>this.send(e,r))}broadcastNonCurrent(e){this.broadcast(e,this.players.filter(t=>t!=this.currentPlayer))}fail(e,t){l(`${this.currentPlayerName}: ${c.red(e)} ${t}`),this.closeGame()}getTeam(e){return e%2==0?this.team0:this.team1}get currentTeam(){return this.getTeam(this.playerIndex)}get oponentTeam(){return this.getTeam(this.playerIndex)===this.team0?this.team1:this.team0}get currentPlayerName(){return this.currentPlayer.color(this.currentPlayer.id)}get currentPlayer(){return this.players[this.playerIndex]}get currentHand(){return this.getHand(this.playerIndex)}getHand(e){return this.getTeam(e).getHand(e<2?0:1)}};var ie=b(require("path"));var L=class{constructor(e){this.id="user";this.id=e,this.child=X((0,ie.join)(__dirname,e))}write(e){this.child.write(`${e}`)}async read(){return await this.child.read()}halt(){this.child.process.kill("SIGINT")}};var q=console.log,be=[c.cyan,c.yellow,c.magenta,c.cyan];function ae(){let s=H.basename(process.argv[0]),e=H.basename(process.argv[1]);$(["Buraco"]),q(`
    Neste jogo, bots competem entre si numa partida de Buraco simplificada.
    Pode-se colocar de 1 at\xE9 4 bots para competir, especificando o caminho de
    seus execut\xE1veis na linha de comando.
    Caso haja um n\xFAmero \xEDmpar de bots, o usu\xE1rio ser\xE1 um dos jogadores
    completando as equipes.
    `),q(`Uso: ${s} ${e} [-h] [-d] [-i <arquivo>] bot1 [bot2 [bot3 [bot4]]]`),q(`
    -h: (help) Explica os par\xE2metros de linha de comando (esta ajuda).
    -d: (debug) Imprime as trocas de mensagens entre o jogo e os bots.
    -i: Inicia a partida com as cartas descritas no arquivo especificado (para testar estrat\xE9gias).
    bot1, bot2...: caminho para os execut\xE1veis dos bots.
    `)}async function we(){let s=process.argv.slice(2).filter(r=>!r.startsWith("-")),e=[],t=s.length;if(t<1||t>4)ae();else{t%2&&e.push(new L("user"));for(let r=0;r<t;r++){let a=s[r],i=`p${r+1}.${H.basename(a)}`;e.push(new x(i,a))}}return e.forEach((r,a)=>r.color=be[a]),e}async function $e(){let s=await we();$(["BURACO",`Jogadores : ${s.map(t=>t.id).join(", ")}`]);let e=new p(s);try{e.initialSetup(),await e.run()}catch(t){console.error(t),s.forEach(r=>r.halt())}}var g=process.argv.indexOf("-d");g>1&&(x.debug=!0,process.argv.splice(g,1));g=process.argv.indexOf("-i");g>1&&g<process.argv.length-1&&(p.initFile=process.argv[g+1],process.argv.splice(g,2));g=process.argv.indexOf("-s");g>1&&g<process.argv.length-1&&(p.seed=parseInt(process.argv[g+1]),process.argv.splice(g,2));process.argv.includes("-h")||process.argv.length<3?ae():$e();
